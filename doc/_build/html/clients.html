<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>clients &mdash; MontyLacuna 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="MontyLacuna 0.1 documentation" href="index.html" />
    <link rel="next" title="empire" href="empire.html" />
    <link rel="prev" title="captcha" href="captcha.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="empire.html" title="empire"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="captcha.html" title="captcha"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">MontyLacuna 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-lacuna.clients">
<span id="clients"></span><h1>clients<a class="headerlink" href="#module-lacuna.clients" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="lacuna.clients.Guest">
<em class="property">class </em><tt class="descclassname">lacuna.clients.</tt><tt class="descname">Guest</tt><big>(</big><em>config_file=''</em>, <em>config_section=''</em>, <em>proto='http'</em>, <em>host='us1.lacunaexpanse.com'</em>, <em>username=''</em>, <em>password=''</em>, <em>api_key='anonymous'</em>, <em>sleep_on_call=1</em>, <em>sleep_after_error=True</em>, <em>session_id=''</em>, <em>warn_on_sleep=True</em>, <em>show_captcha=True</em>, <em>logfile=''</em><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest" title="Permalink to this definition">¶</a></dt>
<dd><p>Guest users are not logged in.</p>
<dl class="docutils">
<dt>Accepts the following named arguments:</dt>
<dd><p class="first">### Setting the first two obviates the need to set anything else.</p>
<p>config_file     path to your configparser-friendly config file</p>
<p>config_section  the section in your config file to read from</p>
<dl class="docutils">
<dt>api_key         your TLE api_key.  Omitting this is fine; the default</dt>
<dd>key (the string &#8216;anonymous&#8217;) will be used.</dd>
<dt>logfile         path to your logfile.  Defaults to no logfile; only</dt>
<dd>WARNING or higher log events will display to the 
terminal.</dd>
</dl>
<p>proto           http or https.  Defaults to http.</p>
<dl class="last docutils">
<dt>host            us1.lacunaexpanse.com or pt.lacunaexpanse.com.</dt>
<dd>Defaults to us1.</dd>
<dt>sleep_on_call   Integer seconds.  Defaults to 1.  Number of seconds to</dt>
<dd>sleep after each call to attempt to avoid using more 
than the limit of 60 RPCs per minute.</dd>
<dt>sleep_on_error  Boolean.  Defaults to True.  If we&#8217;ve used over 60</dt>
<dd>RPCs in a minute, the server will produce an error, 
and if this setting is True, when we get that server 
error we&#8217;ll sleep for a minute and then re-try our 
call.  If this setting is false, we&#8217;ll throw an 
exception.</dd>
</dl>
</dd>
</dl>
<p>Generally, you&#8217;ll omit all arguments except for config_file and 
config_section, and just fill the appropriate values out in your config.</p>
<p>If a config file and section are passed in, the values in that config 
file take precedence over any other values, including passed-in values.</p>
<dl class="docutils">
<dt>Debugging</dt>
<dd><p class="first">To take a look at the actual JSON that would be sent to the TLE 
servers for a specific method call, in your calling code you can set a 
debugging method on your client, eg:</p>
<blockquote>
<div>empire.client.debugging_method = &#8216;view_profile&#8217;
empire.view_profile()</div></blockquote>
<p class="last">In this case, the call to view_profile() will cause the JSON that 
would normally be sent to the server to instead be dumped to your 
screen, after which the script will quit.</p>
</dd>
</dl>
<dl class="method">
<dt id="lacuna.clients.Guest.build_url">
<tt class="descname">build_url</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest.build_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest.build_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a base URL composed of the proto (http or https) and the 
host.  The returned URL does NOT end with a slash.</p>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Guest.create_request_logger">
<tt class="descname">create_request_logger</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest.create_request_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest.create_request_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Don&#8217;t use logging.getLogger() to get at the logger.  Instead, use the 
client.request_logger attribute.</p>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Guest.determine_empname">
<tt class="descname">determine_empname</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest.determine_empname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest.determine_empname" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for logging.  A guest empire name will be returned as 
&#8220;UNKNOWN&#8221;.</p>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Guest.send">
<tt class="descname">send</tt><big>(</big><em>path=''</em>, <em>method=''</em>, <em>params=()</em>, <em>depth=1</em><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Marshals a request and actually sends it to the server, collecting 
and json-decoding the response.</p>
<dl class="docutils">
<dt>Accepts:</dt>
<dd><dl class="first last docutils">
<dt>path (str)</dt>
<dd>The path after the host (eg empire, building, etc).  Don&#8217;t 
include any directory separators.</dd>
<dt>method (str)</dt>
<dd>The name of the method to be run</dd>
<dt>params (tuple)</dt>
<dd>Tuple of arguments/parameters to be passed to the method.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>A dictionary; the json-decoded response from the server.</dd>
<dt>Throws:</dt>
<dd><ul class="first last simple">
<li>NotJsonError if the server response is not a JSON string</li>
<li>ServerError if the server responds with anything other than 
a 200, along with a JSON string</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Guest.send_password_reset_message">
<tt class="descname">send_password_reset_message</tt><big>(</big><em>email=''</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Guest.send_password_reset_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Guest.send_password_reset_message" title="Permalink to this definition">¶</a></dt>
<dd><p>This is meant to send a password reset email to the user&#8217;s 
registered email address.  However, it seems that the TLE server is not 
sending any emails at all, via this method or the browser.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lacuna.clients.Member">
<em class="property">class </em><tt class="descclassname">lacuna.clients.</tt><tt class="descname">Member</tt><big>(</big><em>config_file=''</em>, <em>config_section=''</em>, <em>api_key=''</em>, <em>host=''</em>, <em>logfile=''</em>, <em>proto=''</em>, <em>username=''</em>, <em>password=''</em>, <em>sleep_on_call=1</em>, <em>sleep_after_error=True</em>, <em>show_captcha=True</em>, <em>warn_on_sleep=True</em><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Member"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Member" title="Permalink to this definition">¶</a></dt>
<dd><p>Members are logged in; username and password are required.</p>
<dl class="method">
<dt id="lacuna.clients.Member.login">
<tt class="descname">login</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Member.login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Member.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures the current client is logged in.</p>
<p>If self.session_id is set, we&#8217;ll test it to make sure we can get a 
response.  If so, the session_id is valid and we&#8217;ll continue to use 
that session.</p>
<p>If self.session_id is not set or is found to be invalid, we&#8217;ll log in 
fresh.  The new, now-valid session_id will be written to the config 
file.</p>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Member.logout">
<tt class="descname">logout</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Member.logout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Member.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs the current session out.</p>
<p>Saving the session_id in the config file allows users to complete a 
captcha in one script and have that captcha&#8217;s success apply to all 
other scripts run, as long as that session_id is valid.</p>
<p>Calling logout() invalidates that session_id and removes it from the 
config file.  Therefore, actually calling logout() is rarely 
necessary.</p>
</dd></dl>

<dl class="method">
<dt id="lacuna.clients.Member.write_empire_status">
<tt class="descname">write_empire_status</tt><big>(</big><em>mydict: dict</em><big>)</big><a class="reference internal" href="_modules/lacuna/clients.html#Member.write_empire_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lacuna.clients.Member.write_empire_status" title="Permalink to this definition">¶</a></dt>
<dd><p>This is almost, but not quite the same, as 
lacuna.bc.LacunaObject.write_empire_status().</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="captcha.html"
                        title="previous chapter">captcha</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="empire.html"
                        title="next chapter">empire</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/clients.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="empire.html" title="empire"
             >next</a> |</li>
        <li class="right" >
          <a href="captcha.html" title="captcha"
             >previous</a> |</li>
        <li><a href="index.html">MontyLacuna 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Jonathan Barton.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>